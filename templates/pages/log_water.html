{% extends 'core/base.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/style.css' %}">

<div class="auth-section">
  <div class="auth-container" style="padding: 25vh;">
    <div class="auth-box" style="display:flex; justify-content:  center;">
      <h1 class="auth-title">Track Your Hydration</h1>
      
      <form class="auth-form"  method="POST" id="water-form">
        {% csrf_token %}

        {% if not request.user.is_authenticated %}
          <div class="form-group">
            <label for="gender">Gender</label>
            {{ form.gender }}
          </div>
          
          <div class="form-group">
            <label for="age">Age</label>
            {{ form.age }}
          </div>
          
          <div class="form-group">
            <label for="weight">Weight (kg)</label>
            {{ form.weight }}
          </div>
        {% endif %}
        
        <div class="form-group">
          <label for="activity-level">Activity Level</label>
          {{ form.activity_level }}
        </div>

        <div class="form-group">
          <label for="climate">Climate</label>
          {{ form.climate }}
        </div>

        <div class="form-group">
          <label for="health-conditions">Health Conditions</label>
          {{ form.health_conditions }}
        </div>

        {% if request.user.is_authenticated %}

        <div class="form-group">
          {{ form.reminder_times }}
          {{ form.email_frequency }}
          
        </div>

        {% endif %}

        <div class="auth-buttons">
          <button type="submit" class="cta-btn">Calculate & Start Tracking</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  function startWaterReminder() {
    const interval = document.getElementById("reminder-interval").value;
    const hours = interval === "1" ? "hour" : "hours";
    
    // Show notification using the site's design
    const notification = document.createElement("div");
    notification.className = "notification";
    notification.textContent = `Water reminder set for every ${interval} ${hours}`;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.remove();
    }, 3000);
    
    // Set up the reminder
    setInterval(() => {
      const notification = document.createElement("div");
      notification.className = "notification";
      notification.innerHTML = "Time to drink water! ðŸ’§";
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 3000);
    }, interval * 60 * 60 * 1000);
  }
</script>

{% endblock content %}
